<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã€ç®¡ç†è€…ã€‘ãƒã‚±ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* æ—¢å­˜ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’å®Œå…¨ã«ç¶­æŒ */
    .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px; }
    .stat-card { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #eef2f6; text-align: center; }
    .stat-card h3 { font-size: 0.85rem; color: #64748b; margin: 0 0 10px; }
    .stat-card p { font-size: 1.4rem; font-weight: bold; margin: 0; color: #1e3a8a; }
    .stat-card.highlight { background: #1e3a8a; color: white; border: none; }
    .stat-card.highlight h3, .stat-card.highlight p { color: white; }
    .search-container { margin-bottom: 20px; }
    #searchInput { width: 100%; padding: 12px 20px; border: 2px solid #3b82f6; border-radius: 30px; font-size: 16px; box-sizing: border-box; outline: none; }
    .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }

    /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ–ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .tab-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; background: #edf2f7; color: #4a5568; }
    .tab-btn.active { background: #1e3a8a; color: white; }
    
    /* é›†è¨ˆã‚«ãƒ¼ãƒ‰ã®è£…é£¾ */
    .analysis-card { background: #f8fafc; border-left: 5px solid #1e3a8a; text-align: left; padding: 15px; }
    .analysis-card h4 { margin: 0 0 10px; font-size: 0.9rem; color: #1e3a8a; }
    .analysis-val { font-size: 1.2rem; font-weight: bold; display: flex; justify-content: space-between; margin-bottom: 5px; }

    /* ã€è¿½åŠ ã€‘ã‚¹ãƒãƒ›ã§è¡¨ã‚’æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹è¨­å®šï¼ˆè¦‹ãŸç›®ã¯å¤‰ãˆã¾ã›ã‚“ï¼‰ */
    .table-scroll-area {
      width: 100%;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      border: 1px solid #e2e8f0;
    }
    table {
      min-width: 800px; /* ãƒ†ãƒ¼ãƒ–ãƒ«ãŒæ½°ã‚Œãªã„ã‚ˆã†ã«æœ€å°å¹…ã‚’ç¢ºä¿ */
    }

    @media screen and (max-width: 768px) {
      .admin-container { padding: 10px; }
      .fixed-header { position: static; } /* ã‚¹ãƒãƒ›ã§ã¯ãƒ˜ãƒƒãƒ€ãƒ¼å›ºå®šã‚’è§£é™¤ã—ã¦è¦‹ã‚„ã™ã */
      .opt-btn { padding: 10px 12px !important; font-size: 14px !important; margin: 2px 0; }
    }

    /* å°åˆ·ç”¨è¨­å®š */
    @media print {
      .no-print { display: none !important; }
      .print-only { display: table-cell !important; }
      table { width: 100%; border-collapse: collapse; min-width: auto; }
      table th:nth-child(6), table td:nth-child(6) { width: 100px !important; text-align: right !important; white-space: nowrap !important; }
    }
</style>
</head>

<body style="display:none;" id="admin-body"> <div class="admin-container">
    <div class="fixed-header">
      <header>
        <h1>ğŸ« ãƒã‚±ãƒƒãƒˆç®¡ç†ãƒ‘ãƒãƒ«</h1>
      </header>

      <div class="dashboard-grid">
       <div class="stat-card">
         <h3>ç·ç”³è¾¼ä»¶æ•°</h3>
         <p><span id="stat-total-orders">0</span> ä»¶</p>
         </div>
         <div class="stat-card">
         <h3>ç·ç”³è¾¼äººæ•°</h3>
         <p><span id="stat-total-persons">0</span> å</p>
         </div>
         <div class="stat-card highlight" style="min-width: 250px;">
         <h3>å£²ä¸Šåˆè¨ˆ</h3>
         <p><span id="stat-total-money">0</span> å††</p>
         <div style="font-size: 0.85rem; margin-top: 5px; opacity: 0.9;">
         (å†…å…¥é‡‘æ¸ˆ: <span id="stat-paid-money">0</span> å††)
        </div>
       </div>
      </div>

      <div class="nav-tabs">
        <button id="btn-list" onclick="showPage('list')" class="tab-btn active">ğŸ“‹ æ³¨æ–‡ä¸€è¦§</button>
        <button id="btn-analysis" onclick="showPage('analysis')" class="tab-btn">ğŸ“Š è©³ç´°ãƒ‡ãƒ¼ã‚¿é›†è¨ˆ</button>
      </div>

      <div id="search-area" class="search-container">
        <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="åå‰ãƒ»é›»è©±ç•ªå·ã§æ¤œç´¢...">
      </div>

      <div class="admin-menu">
        <div class="menu-right">
          <a href="direct_entry.html" target="_blank" class="nav-btn sale">â• æ‰‹å£²ã‚Šç™»éŒ²</a>
          <a href="index.html" target="_blank" class="nav-btn form">ğŸŒ äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ </a>
          <button onclick="printList()" class="nav-btn print">ğŸ–¨ï¸ å°åˆ·ç”¨ãƒªã‚¹ãƒˆå‡ºåŠ›</button>
          <button onclick="fetchData()" class="nav-btn print">ğŸ”„ æ›´æ–°</button>
        </div>
      </div>
    </div>

    <div id="page-list" class="table-scroll-area">
      <table id="admin-table">
        <thead>
          <tr>
            <th class="print-only">ç¢ºèª</th>
            <th>å—ä»˜ç•ªå·</th>
            <th>ãŠåå‰</th>
            <th class="text-left no-print">æ“ä½œ</th> 
            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
            <th class="no-print">å—å–æ–¹æ³•</th>
            <th class="print-only">åˆè¨ˆé‡‘é¡</th>
            <th class="no-print">è²©å£²åŒºåˆ†</th>
            <th>æšæ•°å†…è¨³</th> 
            <th>QRã‚³ãƒ¼ãƒ‰</th> </tr>
        </thead>
      <tbody id="admin-list"></tbody>
      </table>
    </div>

    <div id="page-analysis" style="display: none; padding-top: 20px;">
      <div class="dashboard-grid">
        <div class="stat-card analysis-card" style="border-left-color: #ed8936;">
          <h4>æ¸ é“åˆ¥ï¼ˆè²©å£²åŒºåˆ†ï¼‰é›†è¨ˆ</h4>
          <div class="analysis-val"><span>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç”³è¾¼</span><span><span id="ana-sales-online">0</span>ä»¶</span></div>
          <div class="analysis-val"><span>ç›´æ¥è²©å£²ï¼ˆæ‰‹å£²ã‚Šï¼‰</span><span><span id="ana-sales-direct">0</span>ä»¶</span></div>
          <div class="analysis-val"><span>å½“æ—¥è²©å£²</span><span><span id="ana-sales-door">0</span>ä»¶</span></div>
        </div>
        <div class="stat-card analysis-card">
          <h4>ğŸ“ åœ°åŸŸåˆ¥ãŠç”³ã—è¾¼ã¿</h4>
          <div class="analysis-val"><span>é«˜å´å¸‚å†…</span><span id="ana-takasaki">0</span></div>
          <div class="analysis-val"><span>ç¾¤é¦¬çœŒå†…(ä»–)</span><span id="ana-gunma">0</span></div>
          <div class="analysis-val"><span>çœŒå¤–</span><span id="ana-outside">0</span></div>
        </div>
        <div class="stat-card analysis-card" style="border-left-color: #38a169;">
          <h4>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å±æ€§é›†è¨ˆ</h4>
          <div class="analysis-val"><span>å­ä¾›é€£ã‚Œç”³è¾¼</span><span id="ana-child-orders">0</span></div>
        </div>
        <div class="stat-card analysis-card" style="border-left-color: #e53e3e;">
          <h4>ğŸ’ Sã‚¨ãƒªã‚¢è©³ç´°</h4>
          <div class="analysis-val"><span>å¤§äºº</span><span><span id="ana-s-a">0</span>å</span></div>
          <div class="analysis-val"><span>å­ä¾›</span><span><span id="ana-s-c">0</span>å</span></div>
          <div class="analysis-val" style="color: #e53e3e; border-top: 1px dashed #ccc; padding-top: 5px;"><span>å°è¨ˆ</span><span><span id="ana-s-money">0</span>å††</span></div>
        </div>
        <div class="stat-card analysis-card" style="border-left-color: #718096;">
          <h4>ğŸ« ä¸€èˆ¬ã‚¨ãƒªã‚¢è©³ç´°</h4>
          <div class="analysis-val"><span>å¤§äºº</span><span><span id="ana-g-a">0</span>å</span></div>
          <div class="analysis-val"><span>å­ä¾›</span><span><span id="ana-g-c">0</span>å</span></div>
          <div class="analysis-val" style="color: #e53e3e; border-top: 1px dashed #ccc; padding-top: 5px;"><span>å°è¨ˆ</span><span><span id="ana-g-money">0</span>å††</span></div>
        </div>
      </div>
    </div>
  </div>

  <div id="detail-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <h2 id="modal-title">è©³ç´°æƒ…å ±</h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ï¼ˆadmin.jsã®å‰ã«å®Ÿè¡Œï¼‰
    const pass = prompt("ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
    if (pass === "1234") { // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ã“ã“ã§è‡ªç”±ã«å¤‰ãˆã‚‰ã‚Œã¾ã™
      document.getElementById("admin-body").style.display = "block";
    } else {
      alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
      window.location.href = "index.html";
    }
  </script>
  <script src="admin.js"></script>
</body>
</html>