<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ã€ç®¡ç†è€…ã€‘ãƒã‚±ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* --- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆåŸºæœ¬ --- */
    body { background: #f1f5f9; margin: 0; font-family: sans-serif; color: #1e293b; overflow-y: scroll; -webkit-overflow-scrolling: touch; }
    
    /* è¦ªè¦ç´ ã®åˆ¶é™è§£é™¤ï¼ˆå›ºå®šã‚’ç¢ºå®Ÿã«å‹•ã‹ã™ãŸã‚ï¼‰ */
    .admin-wrapper { max-width: 850px; margin: 0 auto; background: #fff; min-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.05); overflow: visible !important; }
    .content-area { padding: 0 15px 60px; }

    /* --- ğŸŒŸ å®Œç’§ãªå›ºå®šã‚¨ãƒªã‚¢è¨­å®š --- */
    .admin-fixed-container {
      position: sticky;
      top: 0;
      z-index: 1000;
      margin: 0 -15px; /* è¦ªã®paddingã‚’ç›¸æ®ºã—ã¦æ¨ªå¹…ã‚’èª¿æ•´ */
      background: #f1f5f9;
    }

    .admin-fixed-inner {
      max-width: 850px;
      margin: 0 auto;
      background: #f1f5f9;
      padding: 15px 15px 5px;
      border-bottom: 2px solid #e2e8f0;
    }

    /* --- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ã‚¿ãƒ–ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
    .dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
    .stat-card { background: #fff; padding: 12px; border-radius: 12px; border: 1px solid #e2e8f0; text-align: center; }
    .stat-card h3 { font-size: 0.7rem; color: #64748b; margin: 0 0 5px; }
    .stat-card p { font-size: 1.1rem; font-weight: bold; margin: 0; color: #1e3a8a; }
    .stat-card.blue { background: #1e3a8a; color: white; border: none; }
    .stat-card.blue h3, .stat-card.blue p { color: white; }

    .quick-menu { display: flex; gap: 8px; justify-content: center; margin-bottom: 15px; flex-wrap: wrap; }
    .q-btn { padding: 8px 15px; border-radius: 20px; font-size: 11px; text-decoration: none; font-weight: bold; color: white; border: none; cursor: pointer; }

    .nav-tabs { display: flex; background: #fff; border-radius: 10px; padding: 4px; margin-bottom: 10px; border: 1px solid #e2e8f0; }
    .tab-btn { flex: 1; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #64748b; background: transparent; transition: 0.2s; }
    .tab-btn.active { background: #f1f5f9; color: #1e3a8a; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }

    /* --- æ¤œç´¢çª“ --- */
    #sticky-search-bar { padding-bottom: 10px; }
    #searchInput { width: 100%; padding: 12px 20px; border: 2px solid #3b82f6; border-radius: 25px; font-size: 16px; box-sizing: border-box; outline: none; background: white !important; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }

    /* --- ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  --- */
    .order-item { border-bottom: 1px solid #f1f5f9; padding: 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; background: white; }
    .order-item:hover { background: #f8fafc; }
    .status-badge { padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; }

    /* --- é›†è¨ˆãƒšãƒ¼ã‚¸ --- */
    .analysis-card { background: #f8fafc; padding: 15px; border-radius: 10px; border-left: 5px solid #1e3a8a; margin-bottom: 15px; }
    .ana-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e2e8f0; font-size: 0.9rem; }

    /* --- ğŸ–¨ï¸ å°åˆ·å°‚ç”¨ --- */
    @media print {
      body * { visibility: hidden; }
      #print-ticket-area, #print-ticket-area * { visibility: visible; }
      #print-ticket-area { display: block !important; position: absolute; left: 0; top: 0; width: 210mm; }
      .ticket-page-wrapper { width: 190mm; height: 68mm; margin: 2mm auto; border: 1px dashed #ccc; display: flex; box-sizing: border-box; page-break-inside: avoid; }
    }

    /* --- ğŸŒŸ ç·¨é›†ç”»é¢ï¼šè¦‹ã‚„ã™ã•ãƒ»æ“ä½œæ€§ ç©¶æ¥µã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ --- */
.modal-content {
  background: #ffffff !important;
  color: #0f172a !important; /* æ–‡å­—ã‚’ã‚ˆã‚Šæ·±ãæ¿ƒã„è‰²ã« */
  padding: 0 !important;
  border-radius: 20px !important;
  overflow: hidden;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5) !important;
}

/* é …ç›®ã”ã¨ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ†ã‘ã‚’ãƒãƒƒã‚­ãƒªã•ã›ã‚‹ */
.modal-section {
  padding: 20px;
  border-bottom: 8px solid #f1f5f9; /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–“ã®åŒºåˆ‡ã‚Šã‚’å¤ªã */
}

.modal-section:last-child { border-bottom: none; }

/* ãƒ©ãƒ™ãƒ«ã‚’å¤§ããã€å¤ªãã€èª­ã¿ã‚„ã™ã */
.modal-content label {
  font-size: 0.95rem !important;
  color: #334155 !important;
  font-weight: 800 !important;
  margin-bottom: 8px !important;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* --- ğŸŒŸ å…¥åŠ›æ ã¨ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®è¡¨ç¤ºå´©ã‚Œã‚’è§£æ¶ˆ --- */
.modal-content input {
      height: auto !important;
      padding: 12px 10px !important;
      font-size: 1rem !important;
      margin-bottom: 5px; /* ãƒ©ãƒ™ãƒ«ã¨ã®è·é›¢ã‚’èª¿æ•´ */
      border: 1px solid #cbd5e1;
      border-radius: 8px;
      box-sizing: border-box;
    } 
.modal-content select, 
.modal-content textarea {
  width: 100%;
  /* ğŸŒŸ é«˜ã•ã‚’ã—ã£ã‹ã‚Šç¢ºä¿ã—ã¦æ–‡å­—åˆ‡ã‚Œã‚’é˜²æ­¢ */
  height: 46px !important; 
  padding: 8px 12px !important;
  margin-bottom: 18px !important; /* ğŸŒŸ é …ç›®é–“ã®é–“éš”ã‚’åºƒã’ã¦ã€Œãã‚…ã£ã€ã‚’è§£æ¶ˆ */
  border: 1px solid #cbd5e1 !important;
  border-radius: 8px !important;
  background: #fff !important;
  color: #1e293b !important;
  box-sizing: border-box !important;
  font-size: 1rem !important; /* ğŸŒŸ æ–‡å­—ã‚µã‚¤ã‚ºã‚’é©åˆ‡ã« */
  line-height: 1.5 !important; /* ğŸŒŸ è¡Œé–“ã®ã‚†ã¨ã‚Š */
  appearance: auto !important; /* ğŸŒŸ ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã®çŸ¢å°ã‚’æ¨™æº–è¡¨ç¤ºã« */
}

/* å‚™è€ƒæ¬„ï¼ˆtextareaï¼‰ã ã‘ã¯é«˜ã•åˆ¶é™ã‚’è§£é™¤ */
.modal-content textarea {
  height: 100px !important;
}

/* ãƒ©ãƒ™ãƒ«ã®ä¸Šä¸‹ã«éš™é–“ã‚’ä½œã‚‹ */
.modal-content label {
  display: block;
  margin-bottom: 6px !important;
  font-weight: bold;
  color: #475569;
  font-size: 0.85rem;
}

.modal-content input:focus {
  border-color: #3b82f6 !important;
  background: #fff !important;
}

/* ãƒã‚±ãƒƒãƒˆæšæ•°ã‚¨ãƒªã‚¢ã‚’ã‚«ãƒ¼ãƒ‰é¢¨ã« */
.ticket-edit-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  background: #fff !important;
  padding: 0 !important;
  border: none !important;
}

.ticket-box {
  background: #fff7ed;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid #ffedd5;
}

/* ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ç”»é¢ä¸‹éƒ¨ã«å¤§ããå›ºå®š */
.save-btn-container {
  padding: 20px;
  background: #fff;
  position: sticky;
  bottom: 0;
  border-top: 1px solid #e2e8f0;
}

.save-btn {
  width: 100%;
  background: #1e3a8a !important;
  color: white !important;
  padding: 18px !important;
  border-radius: 14px !important;
  font-size: 1.1rem !important;
  font-weight: bold !important;
  box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3) !important;
}

/* ğŸ–¨ï¸ å°åˆ·æ™‚ã ã‘ã¯è¡¨ç¤ºã•ã›ã‚‹è¨­å®š */
@media print {
  #print-ticket-area, 
  #print-list-area, 
  #print-content {
    display: block !important;
    visibility: visible !important;
  }
}
  </style>
</head>
<body style="display:none;" id="admin-body">
  <div class="admin-wrapper">
    <div class="content-area">
      
      <div class="admin-fixed-container no-print">
        <div class="admin-fixed-inner">
          <header style="text-align:center; margin-bottom:15px;">
            <h1 style="font-size: 1.2rem; color: #1e3a8a; margin: 0;">ğŸ« ãƒã‚±ãƒƒãƒˆç®¡ç†ãƒ‘ãƒãƒ«</h1>
          </header>

          <div class="dashboard-grid">
            <div class="stat-card"><h3>ç·ç”³è¾¼æ•°</h3><p><span id="stat-total-orders">0</span> ä»¶</p></div>
            <div class="stat-card"><h3>ç·äººæ•°</h3><p><span id="stat-total-persons">0</span> å</p></div>
            <div class="stat-card blue"><h3>åˆè¨ˆå£²ä¸Š</h3><p><span id="stat-total-money">0</span> å††</p></div>
          </div>

          <div class="quick-menu">
            <a href="index.html" target="_blank" class="q-btn" style="background:#3b82f6;">ğŸŒ ãƒ•ã‚©ãƒ¼ãƒ </a>
            <a href="direct_entry.html" target="_blank" class="q-btn" style="background:#10b981;">â• æ‰‹å£²ã‚Šç™»éŒ²</a>
            <button onclick="fetchData()" class="q-btn" style="background:#64748b;">ğŸ”„ æ›´æ–°</button>
            <button onclick="printOrderList()" class="q-btn" style="background:#334155;">ğŸ“‹ åç°¿ã‚’å°åˆ·</button>
          </div>

          <div class="nav-tabs">
            <button id="btn-list" onclick="showPage('list')" class="tab-btn active">ğŸ“‹ æ³¨æ–‡ä¸€è¦§</button>
            <button id="btn-analysis" onclick="showPage('analysis')" class="tab-btn">ğŸ“Š é›†è¨ˆãƒ‡ãƒ¼ã‚¿</button>
          </div>

          <div id="sticky-search-bar">
            <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="åå‰ã§æ¤œç´¢...">
          </div>
        </div>
      </div>

      <div id="page-list">
        <div id="admin-list" style="background:white; border-radius:12px; border:1px solid #e2e8f0;"></div>
      </div>

      <div id="page-analysis" style="display: none; padding-top: 20px;">
        <div class="analysis-card" style="border-left-color: #ec4899; background: #fff1f2;">
          <h4 style="margin:0 0 10px; color: #be123c;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ãƒ•ã‚¡ãƒŸãƒªãƒ¼å±¤é›†è¨ˆ</h4>
          <div class="ana-row"><span>å­ä¾›é€£ã‚Œç”³è¾¼æ•°</span><strong style="font-size: 1.2rem; color: #be123c;"><span id="ana-child-orders">0</span> ä»¶</strong></div>
        </div>
        <div class="analysis-card"><h4 style="margin:0 0 10px;">ğŸ“ åœ°åŸŸåˆ¥é›†è¨ˆ</h4>
          <div class="ana-row"><span>é«˜å´å¸‚å†…</span><span id="ana-takasaki">0</span></div>
          <div class="ana-row"><span>ç¾¤é¦¬çœŒå†…(ä»–)</span><span id="ana-gunma">0</span></div>
          <div class="ana-row"><span>çœŒå¤–</span><span id="ana-outside">0</span></div>
        </div>
        <div class="analysis-card" style="border-left-color:#ef4444;"><h4 style="margin:0 0 10px;">ğŸ« ã‚¨ãƒªã‚¢åˆ¥å†…è¨³</h4>
          <div class="ana-row"><strong>Sã‚¨ãƒªã‚¢ åˆè¨ˆ</strong><strong id="ana-s-total">0 å</strong></div>
          <div class="ana-row"><strong>ä¸€èˆ¬ã‚¨ãƒªã‚¢ åˆè¨ˆ</strong><strong id="ana-g-total">0 å</strong></div>
        </div>
        <div class="analysis-card" style="border-left-color: #3b82f6;"><h4 style="margin:0 0 10px;">ğŸ›’ è²©å£²çµŒè·¯åˆ¥ä»¶æ•°</h4>
          <div class="ana-row"><span>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„</span><strong id="ana-online">0</strong></div>
          <div class="ana-row"><span>ç›´æ¥è²©å£²</span><strong id="ana-direct">0</strong></div>
          <div class="ana-row"><span>å½“æ—¥è²©å£²</span><strong id="ana-door">0</strong></div>
        </div>
        <div class="analysis-card" style="border-left-color:#10b981;"><h4 style="margin:0 0 10px;">ğŸ“… å¹´ä»£åˆ¥ç”³è¾¼æ•°</h4><div id="ana-age-list"></div></div>
        <div class="analysis-card" style="border-left-color:#f59e0b;"><h4 style="margin:0 0 10px;">ğŸ‘¥ ç”·å¥³åˆ¥é›†è¨ˆ</h4>
          <div class="ana-row"><span>ç”·æ€§</span><strong id="ana-male">0</strong></div>
          <div class="ana-row"><span>å¥³æ€§</span><strong id="ana-female">0</strong></div>
        </div>
      </div>
    </div>
  </div>

  <div id="detail-modal" class="modal"><div class="modal-content" style="max-width: 500px; border-radius: 15px;"><span class="close-btn" onclick="closeModal()">&times;</span><div id="modal-body"></div></div></div>
  <div id="print-ticket-area"><div id="print-content"></div></div>

  <script>
    const pass = prompt("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›");
    if (pass === "1234") { document.getElementById("admin-body").style.display = "block"; }
    else { window.location.href = "index.html"; }
  </script>
  <script src="admin.js"></script>
</body>
</html>