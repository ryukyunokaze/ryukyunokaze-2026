<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ã€ç®¡ç†è€…ã€‘ãƒã‚±ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* --- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼šå¿«é©ãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¨ä¸­å¤®å¯„ã›ã‚’ä¸¡ç«‹ --- */
    body { background: #f1f5f9; margin: 0; font-family: sans-serif; color: #1e293b; overflow-y: scroll; -webkit-overflow-scrolling: touch; }
    .admin-wrapper { max-width: 850px; margin: 0 auto; background: #fff; min-height: 100vh; box-shadow: 0 0 20px rgba(0,0,0,0.05); }
    .content-area { padding: 15px; padding-bottom: 60px; }

    /* --- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼šä»¶æ•°ãƒ»äººæ•°ãƒ»å£²ä¸Šã®3åˆ— --- */
    .dashboard-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
    .stat-card { background: #fff; padding: 12px; border-radius: 12px; border: 1px solid #e2e8f0; text-align: center; }
    .stat-card h3 { font-size: 0.7rem; color: #64748b; margin: 0 0 5px; }
    .stat-card p { font-size: 1.1rem; font-weight: bold; margin: 0; color: #1e3a8a; }
    .stat-card.blue { background: #1e3a8a; color: white; border: none; }
    .stat-card.blue h3, .stat-card.blue p { color: white; }

    /* --- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚¿ãƒ– --- */
    .nav-tabs { display: flex; background: #f1f5f9; border-radius: 10px; padding: 4px; margin-bottom: 20px; border: 1px solid #e2e8f0; }
    .tab-btn { flex: 1; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #64748b; background: transparent; transition: 0.2s; }
    .tab-btn.active { background: white; color: #1e3a8a; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }

    /* --- ã‚¯ã‚¤ãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ --- */
    .quick-menu { display: flex; gap: 8px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
    .q-btn { padding: 8px 15px; border-radius: 20px; font-size: 11px; text-decoration: none; font-weight: bold; color: white; border: none; cursor: pointer; }

    /* --- ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ  --- */
    #searchInput { width: 100%; padding: 12px 20px; border: 2px solid #3b82f6; border-radius: 25px; font-size: 16px; box-sizing: border-box; margin-bottom: 15px; outline: none; }
    .order-item { border-bottom: 1px solid #f1f5f9; padding: 15px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
    .order-item:hover { background: #f8fafc; }
    .status-badge { padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; }

    /* --- é›†è¨ˆãƒšãƒ¼ã‚¸ --- */
    .analysis-card { background: #f8fafc; padding: 15px; border-radius: 10px; border-left: 5px solid #1e3a8a; margin-bottom: 15px; }
    .ana-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e2e8f0; font-size: 0.9rem; }

    /* --- ğŸ–¨ï¸ å°åˆ·å°‚ç”¨ï¼šA4 1æšã«4æšã®ãƒã‚±ãƒƒãƒˆã‚’é…ç½® --- */
    @media print {
      /* ç®¡ç†ç”»é¢ã®å…¨è¦ç´ ã‚’éš ã™ */
      body * { visibility: hidden; }
      .no-print, .admin-wrapper, .modal, #detail-modal { display: none !important; }

      /* å°åˆ·ã‚¨ãƒªã‚¢ã ã‘ã‚’æœ‰åŠ¹åŒ– */
      #print-ticket-area, #print-ticket-area * { visibility: visible; }
      #print-ticket-area {
        display: block !important;
        position: absolute;
        left: 0;
        top: 0;
        width: 210mm; /* A4å¹… */
        margin: 0;
        padding: 0;
      }

      /* å„ãƒã‚±ãƒƒãƒˆã®æ çµ„ã¿ï¼ˆA4ç¸¦ã«4ã¤ä¸¦ã¹ã‚‹ï¼‰ */
      .ticket-page-wrapper {
        width: 190mm;
        height: 68mm; /* A4(297mm)ã‚’4åˆ†å‰²(ç´„74mm)ã‚ˆã‚Šå°‘ã—å°ã•ãã—ã¦ä½™ç™½ã‚’ç¢ºä¿ */
        margin: 2mm auto; /* ãƒã‚±ãƒƒãƒˆé–“ã®ã‚ãšã‹ãªéš™é–“ */
        border: 1px dashed #ccc; /* ã‚«ãƒƒãƒˆç”¨ã®ã‚¬ã‚¤ãƒ‰ç·š */
        display: flex;
        box-sizing: border-box;
        page-break-inside: avoid;
      }

      @page { size: A4 portrait; margin: 5mm 0; }
    }
  </style>
</head>
<body style="display:none;" id="admin-body">
  <div class="admin-wrapper">
    <div class="content-area">
      <header style="text-align:center; margin-bottom:15px;">
        <h1 style="font-size: 1.2rem; color: #1e3a8a; margin: 0;">ğŸ« ãƒã‚±ãƒƒãƒˆç®¡ç†ãƒ‘ãƒãƒ«</h1>
      </header>

      <div class="dashboard-grid no-print">
        <div class="stat-card">
          <h3>ç·ç”³è¾¼ä»¶æ•°</h3>
          <p><span id="stat-total-orders">0</span> ä»¶</p>
        </div>
        <div class="stat-card">
          <h3>ç·ç”³è¾¼äººæ•°</h3>
          <p><span id="stat-total-persons">0</span> å</p>
        </div>
        <div class="stat-card blue">
          <h3>å£²ä¸Šåˆè¨ˆ (å†…å…¥é‡‘)</h3>
          <p><span id="stat-total-money">0</span> å††</p>
          <div style="font-size: 0.6rem; opacity: 0.9;">(å…¥é‡‘æ¸ˆ: <span id="stat-paid-money">0</span>å††)</div>
        </div>
      </div>

      <div class="quick-menu no-print">
        <a href="index.html" target="_blank" class="q-btn" style="background:#3b82f6;">ğŸŒ ãƒ•ã‚©ãƒ¼ãƒ </a>
        <a href="direct_entry.html" target="_blank" class="q-btn" style="background:#10b981;">â• æ‰‹å£²ã‚Šç™»éŒ²</a>
        <button onclick="fetchData()" class="q-btn" style="background:#64748b;">ğŸ”„ æ›´æ–°</button>
        <button onclick="window.print()" class="q-btn" style="background:#000;">ğŸ–¨ï¸ å°åˆ·</button>
      </div>

      <div class="nav-tabs no-print">
        <button id="btn-list" onclick="showPage('list')" class="tab-btn active">ğŸ“‹ æ³¨æ–‡ä¸€è¦§</button>
        <button id="btn-analysis" onclick="showPage('analysis')" class="tab-btn">ğŸ“Š é›†è¨ˆãƒ‡ãƒ¼ã‚¿</button>
      </div>

      <div id="page-list">
        <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="åå‰ã§æ¤œç´¢...">
        <div id="admin-list" style="background:white; border-radius:12px; border:1px solid #e2e8f0;"></div>
      </div>

      <div id="page-analysis" style="display: none;">
        <div class="analysis-card">
          <h4 style="margin:0 0 10px;">å±æ€§ãƒ»åœ°åŸŸé›†è¨ˆ</h4>
          <div class="ana-row"><span>å­ä¾›é€£ã‚Œç”³è¾¼æ•°</span><strong id="ana-child-orders">0</strong></div>
          <div class="ana-row"><span>é«˜å´å¸‚å†…</span><span id="ana-takasaki">0</span></div>
          <div class="ana-row"><span>ç¾¤é¦¬çœŒå†…(ä»–)</span><span id="ana-gunma">0</span></div>
          <div class="ana-row"><span>çœŒå¤–</span><span id="ana-outside">0</span></div>
        </div>
        <div class="analysis-card" style="border-left-color:#ef4444;">
          <h4 style="margin:0 0 10px;">ã‚¨ãƒªã‚¢åˆ¥å†…è¨³</h4>
          <div class="ana-row"><span>Så¤§äºº / Så­ä¾›</span><span><span id="ana-s-a">0</span> / <span id="ana-s-c">0</span> å</span></div>
          <div class="ana-row"><span>ä¸€èˆ¬å¤§äºº / ä¸€èˆ¬å­ä¾›</span><span><span id="ana-g-a">0</span> / <span id="ana-g-c">0</span> å</span></div>
        </div>
      </div>
    </div>
  </div>

  <div id="detail-modal" class="modal">
    <div class="modal-content" style="max-width: 500px; border-radius: 15px;">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <div id="print-ticket-area">
    <div id="print-content"></div>
  </div>

  <script>
    const pass = prompt("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›");
    if (pass === "1234") { document.getElementById("admin-body").style.display = "block"; }
    else { window.location.href = "index.html"; }
  </script>
  <script src="admin.js"></script>
</body>
</html>